---
import "../styles/global.css";
import {getCollection } from 'astro:content';
import { getLatestPanel } from "../api/utils";
var urlforNavPrev = "";
var urlforNavNext ="";
var urlforLast = "";
var activeClassName = "";
var urlforReturnToTop = "";


const {currentSlug}=Astro.props;
if(currentSlug)
{
    var split:string = currentSlug.split('/');
    var comic = split[0];
    var id = split[1];
    var nextid = (parseInt(id)+1);
    var previd = (parseInt(id)-1);

    if(previd<=0)
    previd=1;

    urlforNavNext = "/comics/"+ comic + "/" + nextid;
    urlforNavPrev = "/comics/"+comic + "/" + previd;
    urlforReturnToTop = "/comics/"
    

    const pages = await getCollection('comics', ({data}) => {    
        return data;
    })
    var count = await getLatestPanel(comic);

    urlforLast =  "/comics/"+comic + "/" + count;
    if(nextid > count)
    {
        activeClassName ="hide";
    }
    else{
        activeClassName ="";
    }
}

---

<div class="content_nav libertinus-sans-regular">
    <a class="interactable_background" href={`${urlforNavPrev}`}>PREV</a>
    <a class={activeClassName + " interactable_background"} href={`${urlforNavNext}`}>NEXT</a>
   <!-- <a class={activeClassName + " interactable_background"} href={`${urlforLast}`}>LAST</a> -->
    <a class={" interactable_background"} href={`${urlforReturnToTop}`}>RETURN TO COMICS</a>
</div>